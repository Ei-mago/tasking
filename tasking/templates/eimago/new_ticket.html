{% extends 'base.html' %}
{% block content %}
    <script src="{{ static('js/jquery-3.4.0.min.js') }}" type="text/javascript"></script>
    <div ui-view="" class="main-view am-fade ng-scope" style=""><!-- uiView: -->
        <div ui-view="" class="ng-scope">
            <div class="ticket-detail-panel ticket-new ng-scope">
                <header>
                    <div class="title">
                        <div ticket="newTicket" custom-form-fields="customFormFields" class="ng-isolate-scope"
                             style="display:inline-block">
                            <button class="btn btn-default dropdown-toggle btn-user-template" type="button"
                                    data-toggle="dropdown" style="width:304px">
                                <!-- ngIf: !selectedTicketTemplate --><span
                                    ng-if="!selectedTicketTemplate" class="ng-scope">使用工单模板</span>
                                <!-- end ngIf: !selectedTicketTemplate --> <!-- ngIf: !!selectedTicketTemplate --> <span
                                    class="caret"></span></button>
                            <ul class="dropdown-menu"
                                style="width:304px;max-height:450px;overflow-y:auto;top:52px;left:18px">
                                <!-- ngRepeat: ticketTemplate in ticketTemplates -->
                                <li ng-repeat="ticketTemplate in ticketTemplates"
                                    ng-click="changeTicketTemplate(ticketTemplate)" class="ng-scope"><a
                                        href="javascript:void(0)" class="ng-binding">不使用模板</a></li>
                                <!-- end ngRepeat: ticketTemplate in ticketTemplates --></ul>
                        </div>
                        <div class="pull-right"><!-- ngIf: newTicket.createType === 'batch-customer' -->
                            <!-- ngIf: newTicket.createType === 'batch-engineer' --></div>
                    </div>
                </header>
                <div class="body" style="overflow: auto">
                    <form action="{{ url("orders:new_ticket") }}" method="post">
                        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                        <div class="panel-form"
                             style="height: 685px; width: 285px; padding:15px; background-color: white; position: relative; overflow: auto">
                            <div class="ticket-form ng-isolate-scope" ticket="newTicket" new-ticket-form="true"
                                 hide-requester="newTicket.createType === &#39;batch-customer&#39;"
                                 hide-handle="newTicket.createType === &#39;batch-engineer&#39;">
                                <fieldset
                                        ng-disabled="ticket.status==&#39;closed&#39;||ticket.deleted||ticket.status==&#39;deleted&#39;||ticket.status==&#39;suspended&#39;||!editableTicket">
                                    <div ng-class="ticket_bottom" class="ticket_bottom_80"><!-- ngIf: !hideRequester -->
                                        <div class="form-group ng-scope" ng-if="!hideRequester"><label>客户 <span
                                                class="required">*</span></label>
                                            <!-- ngIf: currentUser.id != ticket.requester.id && requesterToMeShow &&!ticket.id -->
{#                                            <a class="pull-right custom-link-color ng-scope"#}
{#                                               ng-if="currentUser.id != ticket.requester.id &amp;&amp; requesterToMeShow &amp;&amp;!ticket.id"#}
{#                                               ng-click="updateRequesterToMe()">以我的名义</a>#}
                                            <!-- end ngIf: currentUser.id != ticket.requester.id && requesterToMeShow &&!ticket.id -->
                                            <fieldset>
                                                <user-select selecteduser="ticket.requester" ticketid="ticket.id"
                                                             usertype="&#39;all&#39;" by-access-scope="false"
                                                             class="ng-isolate-scope">
                                                    <style>#user-select ul {
                                                        min-width: 230px;
                                                        max-height: 466px;
                                                        overflow: auto;
                                                        padding: 0
                                                    }

                                                    .user-select-wrap {
                                                        min-height: 26px;
                                                        border-bottom: 1px solid #efefef;
                                                        padding: 2px 1em;
                                                        cursor: default
                                                    }

                                                    .active > .user-select-wrap, .user-select-wrap:hover {
                                                        background-color: #efefef
                                                    }

                                                    .user-select-wrap > p {
                                                        height: 20px;
                                                        line-height: 20px;
                                                        white-space: nowrap
                                                    }

                                                    #user-select.with-create ul li:first-child .user-select-wrap {
                                                        height: 26px;
                                                        color: #fff;
                                                        background-color: #009dd9;
                                                        padding: 2px 1em;
                                                        cursor: pointer
                                                    }

                                                    #user-select > .input-group {
                                                        width: 100%
                                                    }

                                                    #user-select .input-group-addon:hover {
                                                        cursor: pointer;
                                                        background-color: #999
                                                    }</style>
                                                    <span id="user-select"
                                                          ng-class="{&#39;with-create&#39;: withCreate}"
                                                          class="with-create"><span
                                                            ng-class="{&#39;input-group&#39;: canClear &amp;&amp; selecteduser}"><div
                                                            style="position: relative;"><input type="text"
                                                                                               ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                                                               ng-focus="onFocus();"
                                                                                               ng-blur="onBlur();"
                                                                                               class="form-control ng-pristine ng-untouched ng-valid"
                                                                                               ng-model="username"
                                                                                               placeholder=""
                                                                                               uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                                                               typeahead-scroll-load="loadMore()"
                                                                                               typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                                                               typeahead-editable="true"
                                                                                               typeahead-focus-on-select="false"
                                                                                               scroll-load-distance="20"
                                                                                               typeahead-min-length="0"
                                                                                               typeahead-wait-ms="500"
                                                                                               typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                                                               typeahead-show-hint="true"
                                                                                               aria-autocomplete="list"
                                                                                               aria-expanded="false"
                                                                                               aria-owns="typeahead-11152-7375"
                                                                                               tabindex="-1"
                                                                                               style="position: absolute; top: 0px; left: 0px; border-color: transparent; box-shadow: none; opacity: 1; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255); color: rgb(153, 153, 153);">

                                                <input type="text"
                                                       ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                       ng-focus="onFocus();" ng-blur="onBlur();"
                                                       class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                       name="customer"
                                                       value=""
                                                       list="customer_list_y"
                                                       ng-model="username" placeholder="输入关键字搜索客户"
                                                       uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                       typeahead-scroll-load="loadMore()"
                                                       typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                       typeahead-editable="true" typeahead-focus-on-select="false"
                                                       scroll-load-distance="20" typeahead-min-length="0"
                                                       typeahead-wait-ms="500"
                                                       typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                       typeahead-show-hint="true" aria-autocomplete="list"
                                                       aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                       style="position: relative; vertical-align: top; background-color: transparent;"><ul
                                                                class="dropdown-menu ng-isolate-scope ng-hide"
                                                                ng-show="isOpen() &amp;&amp; !moveInProgress"
                                                                ng-style="{top: position().top+&#39;px&#39;, left: position().left+&#39;px&#39;}"
                                                                role="listbox" aria-hidden="true" uib-typeahead-popup=""
                                                                id="typeahead-11152-7375" matches="matches"
                                                                active="activeIdx"
                                                                select="select(activeIdx, evt)"
                                                                move-in-progress="moveInProgress"
                                                                query="query" position="position"
                                                                assign-is-open="assignIsOpen(isOpen)"
                                                                debounce="debounceUpdate"
                                                                template-url="/source/scripts/directives/user-select/match-template.html"
                                                                style="">
                                                 {% for error in form.customer.errors %}
                                                     <p style= "text-align:center">{{ error }}</p>
                                                 {% endfor %}
                                                <datalist id="customer_list_y">
                                                   {% for customer in customer_list %}
                                                    <option value="{{ customer.cname }}"></option>
                                                   {% endfor %}
                                                </datalist>

                                                            <!-- ngRepeat: match in matches track by $index -->
</ul></div> <!-- ngIf: canClear && selecteduser --></span></span></user-select>
                                            </fieldset>
                                        </div><!-- end ngIf: !hideRequester --><!-- ngIf: !hideHandle -->

                                        <div class="form-group ticket-detail-form ng-scope" ng-if="!hideHandle">
                                            <div class="ticket-handler engineer-or-workflow-select ng-isolate-scope"
                                                 showinticketdetail="true" selectedservicedesk="ticket.serviceDesk"
                                                 selectedengineer="ticket.engineer"
                                                 selectedworkflow="ticket.workflowTemplate" ticketid="ticket.id"
                                                 assignable="true"
                                                 activiti-workflow-node-uid="ticket.activitiWorkflowNodeUid"
                                                 show-more-info-bar="true"><!-- ngIf: showinticketdetail --><label
                                                    ng-if="showinticketdetail" class="ng-scope">处理人 <span
                                                    class="required">*</span></label>
                                            </div>   <!-- end ngIf: showinticketdetail -->
                                            <!-- ngIf: selectedworkflow!=null -->
{#                                            <input type="hidden", name="opreate_id", value="{{ request.GET.id }}">#}
                                            <input type="text"
                                                   ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                   ng-focus="onFocus();" ng-blur="onBlur();"
                                                   class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                   name="opreate"
                                                   value="{{ request.session['username'] }}"
                                                   list="opreate_list_y"
                                                   ng-model="username" placeholder="默认服务台"
                                                   uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                   typeahead-scroll-load="loadMore()"
                                                   typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                   typeahead-editable="true" typeahead-focus-on-select="false"
                                                   scroll-load-distance="20" typeahead-min-length="0"
                                                   typeahead-wait-ms="500"
                                                   typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                   typeahead-show-hint="true" aria-autocomplete="list"
                                                   aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                   style="position: relative; vertical-align: top; background-color: transparent;">
                                            <datalist id="opreate_list_y">
                                                <option value="{{ request.session['username'] }}"></option>
                                                consl
                                                <option value="后台系统"></option>
                                            </datalist>
                                        </div><!-- end ngIf: !hideHandle -->

                                        <div class="form-group ticket-detail-form"><label>抄送给</label>
                                            <ticket-cc-input class="copy-to ng-isolate-scope" iscopytome="isCopyToMe"
                                                             isticketdetail="true" ccs="ticket.ccs"
                                                             usergroup="ticket.requester.userGroup"
                                                             user="ticket.requester"
                                                             who="ticket" whoid="" assignable="true">
                                                <!-- ngIf: assignable=='true'&&(hidetomy==null||!hidetomy) -->
{#                                                <a class="custom-link-color pull-right ng-scope" ng-if="assignable==&#39;true&#39;&amp;&amp;(hidetomy==null||!hidetomy)" ng-click="ccMe(isContainMe)"><span ng-show="!isContainMe" class="">抄送给我</span><span ng-show="isContainMe" class="ng-hide">移除我</span></a>#}
                                                <input type="text"
                                                       ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                       ng-focus="onFocus();" ng-blur="onBlur();"
                                                       class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                       name="copyfor"
                                                       value=""
                                                       ng-model="username" placeholder="输入Email或名字"
                                                       uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                       typeahead-scroll-load="loadMore()"
                                                       typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                       typeahead-editable="true" typeahead-focus-on-select="false"
                                                       scroll-load-distance="20" typeahead-min-length="0"
                                                       typeahead-wait-ms="500"
                                                       typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                       typeahead-show-hint="true" aria-autocomplete="list"
                                                       aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                       style="position: relative; vertical-align: top; background-color: transparent;">
                                                <!-- end ngIf: assignable=='true'&&(hidetomy==null||!hidetomy) -->
                                                {#                                        <tags-input ng-disabled="assignable!==&#39;true&#39;"#}
                                                {#                                                    ng-class="{&#39;w300&#39;:width == &#39;w300&#39;,&#39;w230&#39;:width == &#39;w230&#39;,&#39;height34&#39;:isHidden}"#}
                                                {#                                                    ng-focus="onFocus(){*focus()*}" ng-blur="blur()" ng-keyup="keyup()"#}
                                                {#                                                    text="inputText" ng-model="ccs" display-property="name"#}
                                                {#                                                    on-tag-adding="validateTag($tag);" on-tag-added="tagAdded($tag)"#}
                                                {#                                                    on-tag-removed="tagRemoved($tag)" replace-spaces-with-dashes="false"#}
                                                {#                                                    min-length="1" max-length="128" max-tags="20"#}
                                                {#                                                    placeholder="输入Email或名字" key-property="id" id="tagsInput"#}
                                                {#                                                    class="ng-pristine ng-untouched ng-valid ng-isolate-scope ng-empty ng-valid-max-tags ng-valid-min-tags ng-valid-leftover-text">#}
                                                {#                                            <div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append="">#}
                                                {#                                                <div class="tags" ng-class="{focused: hasFocus}">#}
                                                {#                                                    <ul class="tag-list">#}
                                                {#                                                        <!-- ngRepeat: tag in tagList.items track by track(tag) --></ul>#}
                                                {#                                                    <input class="input ng-pristine ng-untouched ng-valid ng-empty"#}
                                                {#                                                           autocomplete="off" ng-model="newTag.text"#}
                                                {#                                                           ng-model-options="{getterSetter: true}"#}
                                                {#                                                           ng-keydown="eventHandlers.input.keydown($event)"#}
                                                {#                                                           ng-focus="eventHandlers.input.focus($event)"#}
                                                {#                                                           ng-blur="eventHandlers.input.blur($event)"#}
                                                {#                                                           ng-paste="eventHandlers.input.paste($event)" ng-trim="false"#}
                                                {#                                                           ng-class="{&#39;invalid-tag&#39;: newTag.invalid}"#}
                                                {#                                                           ng-disabled="disabled"#}
                                                {#                                                           ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}"#}
                                                {#                                                           ti-autosize="" type="text" placeholder="输入Email或名字"#}
                                                {#                                                           spellcheck="true" style="width: 113px;"><span class="input"#}
                                                {#                                                                                                         style="visibility: hidden; width: auto; white-space: pre; display: none;">输入Email或名字</span>#}
                                                {#                                                </div>#}
                                                {#                                                <auto-complete source="loadUsers($query)" min-length="1"#}
                                                {#                                                               debounce-delay="300" ng-focus="focus()"#}
                                                {#                                                               class="ng-scope ng-isolate-scope">#}
                                                {#                                                    <!-- ngIf: suggestionList.visible --></auto-complete>#}
                                                {#                                                <div class="dropdown ng-scope ng-hide"#}
                                                {#                                                     ng-show="dropdown.isShowDropdown">#}
                                                {#                                                    <ul class="list-group dropdown-menu padding0 of_y1"#}
                                                {#                                                        style="display:block;max-height:300px;width:100%">#}
                                                {#                                                        <li class="list-group-item ng-hide"#}
                                                {#                                                            ng-show="dropdown.isShowBack">#}
                                                {#                                                            <button class="btn btn-default btn-xs"#}
                                                {#                                                                    ng-click="changeCurrentDropdown(&#39;back&#39;)">#}
                                                {#                                                                <span class="glyphicon glyphicon-chevron-left"></span>#}
                                                {#                                                                返回#}
                                                {#                                                            </button>#}
                                                {#                                                        </li>#}
                                                {#                                                        <li class="list-group-item ng-hide"#}
                                                {#                                                            ng-show="dropdown.type == &#39;foreign&#39;"><input#}
                                                {#                                                                type="text"#}
                                                {#                                                                class="form-control foreign-input ng-pristine ng-untouched ng-valid ng-empty"#}
                                                {#                                                                id="tagsInput2" placeholder="输入外援的邮箱"#}
                                                {#                                                                ng-keyup="inputForeign()"#}
                                                {#                                                                ng-model="dropdown.foreignEmail"> <input type="button"#}
                                                {#                                                                                                         class="btn btn-default foreign-btn custom-main-bgcolor"#}
                                                {#                                                                                                         value="确定"#}
                                                {#                                                                                                         ng-click="addForeign()">#}
                                                {#                                                        </li><!-- ngRepeat: item in dropdownList track by $index -->#}
                                                {#                                                        <li class="list-group-item cursorhand ng-scope"#}
                                                {#                                                            ng-show="dropdown.type != &#39;foreign&#39; &amp;&amp; (item.show || dropdown.currentDropdown != 1)"#}
                                                {#                                                            ng-repeat="item in dropdownList track by $index"#}
                                                {#                                                            ng-click="selectItem(item,$event)"><span#}
                                                {#                                                                class="persons ng-hide"#}
                                                {#                                                                ng-show="dropdown.isShowGroupIcon"></span>#}
                                                {#                                                            <!-- ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' --><span#}
                                                {#                                                                    ng-if="dropdown.type != &#39;engineer&#39; || dropdown.currentDropdown != 3 || item.type === &#39;serviceDesk&#39;"#}
                                                {#                                                                    class="ng-scope"><span#}
                                                {#                                                                    ng-bind="item.name? item.name : item.nickname | translate"#}
                                                {#                                                                    class="ng-binding">客户</span> <span#}
                                                {#                                                                    ng-show="item.email" class="ng-hide">(<span#}
                                                {#                                                                    ng-bind="item.email"#}
                                                {#                                                                    class="ng-binding"></span>) </span></span>#}
                                                {#                                                            <!-- end ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' -->#}
                                                {#                                                            <!-- ngIf: dropdown.type == 'engineer' && dropdown.currentDropdown == 3 && item.type !== 'serviceDesk' --><span#}
                                                {#                                                                    ng-show="dropdown.isShowNextIcon"#}
                                                {#                                                                    class="pull-right glyphicon glyphicon-chevron-right ng-scope"></span>#}
                                                {#                                                        </li><!-- end ngRepeat: item in dropdownList track by $index -->#}
                                                {#                                                        <li class="list-group-item cursorhand ng-scope"#}
                                                {#                                                            ng-show="dropdown.type != &#39;foreign&#39; &amp;&amp; (item.show || dropdown.currentDropdown != 1)"#}
                                                {#                                                            ng-repeat="item in dropdownList track by $index"#}
                                                {#                                                            ng-click="selectItem(item,$event)"><span#}
                                                {#                                                                class="persons ng-hide"#}
                                                {#                                                                ng-show="dropdown.isShowGroupIcon"></span>#}
                                                {#                                                            <!-- ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' --><span#}
                                                {#                                                                    ng-if="dropdown.type != &#39;engineer&#39; || dropdown.currentDropdown != 3 || item.type === &#39;serviceDesk&#39;"#}
                                                {#                                                                    class="ng-scope"><span#}
                                                {#                                                                    ng-bind="item.name? item.name : item.nickname | translate"#}
                                                {#                                                                    class="ng-binding">客服</span> <span#}
                                                {#                                                                    ng-show="item.email" class="ng-hide">(<span#}
                                                {#                                                                    ng-bind="item.email"#}
                                                {#                                                                    class="ng-binding"></span>) </span></span>#}
                                                {#                                                            <!-- end ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' -->#}
                                                {#                                                            <!-- ngIf: dropdown.type == 'engineer' && dropdown.currentDropdown == 3 && item.type !== 'serviceDesk' --><span#}
                                                {#                                                                    ng-show="dropdown.isShowNextIcon"#}
                                                {#                                                                    class="pull-right glyphicon glyphicon-chevron-right ng-scope"></span>#}
                                                {#                                                        </li><!-- end ngRepeat: item in dropdownList track by $index -->#}
                                                {#                                                        <li class="list-group-item cursorhand ng-scope"#}
                                                {#                                                            ng-show="dropdown.type != &#39;foreign&#39; &amp;&amp; (item.show || dropdown.currentDropdown != 1)"#}
                                                {#                                                            ng-repeat="item in dropdownList track by $index"#}
                                                {#                                                            ng-click="selectItem(item,$event)"><span#}
                                                {#                                                                class="persons ng-hide"#}
                                                {#                                                                ng-show="dropdown.isShowGroupIcon"></span>#}
                                                {#                                                            <!-- ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' --><span#}
                                                {#                                                                    ng-if="dropdown.type != &#39;engineer&#39; || dropdown.currentDropdown != 3 || item.type === &#39;serviceDesk&#39;"#}
                                                {#                                                                    class="ng-scope"><span#}
                                                {#                                                                    ng-bind="item.name? item.name : item.nickname | translate"#}
                                                {#                                                                    class="ng-binding">关联客户</span> <span#}
                                                {#                                                                    ng-show="item.email" class="ng-hide">(<span#}
                                                {#                                                                    ng-bind="item.email"#}
                                                {#                                                                    class="ng-binding"></span>) </span></span>#}
                                                {#                                                            <!-- end ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' -->#}
                                                {#                                                            <!-- ngIf: dropdown.type == 'engineer' && dropdown.currentDropdown == 3 && item.type !== 'serviceDesk' --><span#}
                                                {#                                                                    ng-show="dropdown.isShowNextIcon"#}
                                                {#                                                                    class="pull-right glyphicon glyphicon-chevron-right ng-scope"></span>#}
                                                {#                                                        </li><!-- end ngRepeat: item in dropdownList track by $index -->#}
                                                {#                                                        <li class="list-group-item cursorhand ng-scope"#}
                                                {#                                                            ng-show="dropdown.type != &#39;foreign&#39; &amp;&amp; (item.show || dropdown.currentDropdown != 1)"#}
                                                {#                                                            ng-repeat="item in dropdownList track by $index"#}
                                                {#                                                            ng-click="selectItem(item,$event)"><span#}
                                                {#                                                                class="persons ng-hide"#}
                                                {#                                                                ng-show="dropdown.isShowGroupIcon"></span>#}
                                                {#                                                            <!-- ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' --><span#}
                                                {#                                                                    ng-if="dropdown.type != &#39;engineer&#39; || dropdown.currentDropdown != 3 || item.type === &#39;serviceDesk&#39;"#}
                                                {#                                                                    class="ng-scope"><span#}
                                                {#                                                                    ng-bind="item.name? item.name : item.nickname | translate"#}
                                                {#                                                                    class="ng-binding">外援</span> <span#}
                                                {#                                                                    ng-show="item.email" class="ng-hide">(<span#}
                                                {#                                                                    ng-bind="item.email"#}
                                                {#                                                                    class="ng-binding"></span>) </span></span>#}
                                                {#                                                            <!-- end ngIf: dropdown.type != 'engineer' || dropdown.currentDropdown != 3 || item.type === 'serviceDesk' -->#}
                                                {#                                                            <!-- ngIf: dropdown.type == 'engineer' && dropdown.currentDropdown == 3 && item.type !== 'serviceDesk' --><span#}
                                                {#                                                                    ng-show="dropdown.isShowNextIcon"#}
                                                {#                                                                    class="pull-right glyphicon glyphicon-chevron-right ng-scope"></span>#}
                                                {#                                                        </li><!-- end ngRepeat: item in dropdownList track by $index -->#}
                                                {#                                                    </ul>#}
                                                {#                                                </div>#}
                                                {#                                            </div>#}
                                                {#                                        </tags-input>#}
                                            </ticket-cc-input>
                                        </div>

                                        <div class="form-group"><label class="ng-binding">类型
                                            <!-- ngIf: typeFiled.required --></label>
                                            <input type="text"
                                                   ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                   ng-focus="onFocus();" ng-blur="onBlur();"
                                                   class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                   name="question"
                                                   value=""
                                                   list="question_list_y"
                                                   ng-model="username" placeholder="请选择类型"
                                                   uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                   typeahead-scroll-load="loadMore()"
                                                   typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                   typeahead-editable="true" typeahead-focus-on-select="false"
                                                   scroll-load-distance="20" typeahead-min-length="0"
                                                   typeahead-wait-ms="500"
                                                   typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                   typeahead-show-hint="true" aria-autocomplete="list"
                                                   aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                   style="position: relative; vertical-align: top; background-color: transparent;">
                                            <datalist id="question_list_y">
                                                {% for tyle in tyle_list %}
                                                    <option value="{{ tyle.name }}"></option>
                                                {% endfor %}
                                            </datalist>

                                        </div>
                                        <div class="form-group"><label class="ng-binding">服务目录
                                            <!-- ngIf: catalogFiled.required --> <span
                                                    style="max-width:200px;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400;position:relative;top:4px;color:#999"
                                                    class="ng-binding">(工单服务目录)</span></label>
                                            <input type="text" id="service_list_info_y"
                                                   ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                   ng-focus="onFocus();" ng-blur="onBlur();"
                                                   class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                   name="service_list"
                                                   value=""
                                                   list="service_list_y"
                                                   ng-model="username" placeholder="请选择服务目录"
                                                   uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                   typeahead-scroll-load="loadMore()"
                                                   typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                   typeahead-editable="true" typeahead-focus-on-select="false"
                                                   scroll-load-distance="20" typeahead-min-length="0"
                                                   typeahead-wait-ms="500"
                                                   typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                   typeahead-show-hint="true" aria-autocomplete="list"
                                                   aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                   style="position: relative; vertical-align: top; background-color: transparent;">
                                                <div id="service_list_div_y" style="padding:8px; width: 250px; border-style: solid; border-width: 1px;border-radius:10px; border-color: rgba(200,200,200,0.55); display: none">
                                                        {% for big in big_service %}
                                                            <table  style="width: 220px; height: 25px; font-size: 15px; color: black;">
                                                                <tr style=" border-bottom: dashed 1px;">
                                                                    <td >{{ big.ugname }}</td>
                                                                </tr>
                                                                {% for small in small_service %}
                                                                    {% if big.ugid == small.pid %}
                                                                        <tr  style="border-bottom: dashed 1px; background-color: rgba(200,200,200,0.30);display: none">
                                                                        <td >{{ small.ugname }}</td>
                                                                        </tr>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            </table>
                                                        {% endfor %}
                                                </div>
                                        </div>
                                        <div class="form-group"><label class="ng-binding">优先级
                                            <!-- ngIf: priorityFiled.required --></label>
                                            <input type="text"
                                                   ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                   ng-focus="onFocus();" ng-blur="onBlur();"
                                                   class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                   name="priority"
                                                   value=""
                                                   list="priority_list_y"
                                                   ng-model="username" placeholder="请选择优先级"
                                                   uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                   typeahead-scroll-load="loadMore()"
                                                   typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                   typeahead-editable="true" typeahead-focus-on-select="false"
                                                   scroll-load-distance="20" typeahead-min-length="0"
                                                   typeahead-wait-ms="500"
                                                   typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                   typeahead-show-hint="true" aria-autocomplete="list"
                                                   aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                   style="position: relative; vertical-align: top; background-color: transparent;">
                                            <datalist id="priority_list_y">
                                                <option value="P0">紧急</option>
                                                <option value="P1">高</option>
                                                <option value="P2">中</option>
                                                <option value="P3">低</option>
                                            </datalist>
                                        </div>
                                        <div class="form-group"><label class="ng-binding">要求完成时间
                                            <!-- ngIf: planSolvedAtField.required --></label>
                                            <input type="datetime-local"
                                                   ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                   ng-focus="onFocus();" ng-blur="onBlur();"
                                                   class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                   name="finish_time"
                                                   value=""
                                                   ng-model="username"
                                                   uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                   typeahead-scroll-load="loadMore()"
                                                   typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                   typeahead-editable="true" typeahead-focus-on-select="false"
                                                   scroll-load-distance="20" typeahead-min-length="0"
                                                   typeahead-wait-ms="500"
                                                   typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                   typeahead-show-hint="true" aria-autocomplete="list"
                                                   aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                   style="position: relative; vertical-align: top; background-color: transparent;">
                                        </div>
                                        <div class="form-group"><label class="ng-binding">标签
                                            <!-- ngIf: tagsField.required --></label>
                                            <input type="text"
                                                   ng-disabled="chatisclose || chatbtngroupstatus == &#39;chat_transfer&#39;"
                                                   ng-focus="onFocus();" ng-blur="onBlur();"
                                                   class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                   name="sign"
                                                   value=""
                                                   list="sign_list_y"
                                                   ng-model="username" placeholder="输入关键字搜索标签，或创建新标签"
                                                   uib-typeahead="user.name for user in loadUsers($viewValue)"
                                                   typeahead-scroll-load="loadMore()"
                                                   typeahead-on-select="onSelect($item, $model, $label, $event)"
                                                   typeahead-editable="true" typeahead-focus-on-select="false"
                                                   scroll-load-distance="20" typeahead-min-length="0"
                                                   typeahead-wait-ms="500"
                                                   typeahead-template-url="/source/scripts/directives/user-select/match-template.html"
                                                   typeahead-show-hint="true" aria-autocomplete="list"
                                                   aria-expanded="false" aria-owns="typeahead-11152-7375"
                                                   style="position: relative; vertical-align: top; background-color: transparent; font-size: small">
                                            <ul
                                                    class="dropdown-menu ng-isolate-scope ng-hide"
                                                    ng-show="isOpen() &amp;&amp; !moveInProgress"
                                                    ng-style="{top: position().top+&#39;px&#39;, left: position().left+&#39;px&#39;}"
                                                    role="listbox" aria-hidden="true" uib-typeahead-popup=""
                                                    id="typeahead-11152-7375" matches="matches" active="activeIdx"
                                                    select="select(activeIdx, evt)" move-in-progress="moveInProgress"
                                                    query="query" position="position"
                                                    assign-is-open="assignIsOpen(isOpen)" debounce="debounceUpdate"
                                                    template-url="/source/scripts/directives/user-select/match-template.html">
                                                <datalist id="sign_list_y">
                                                    <option value="搜索标题"></option>

                                                </datalist>
                                        </div>
                                        <div>
                                            <ticket-custome-field ticket="ticket" new-ticket-form="newTicketForm"
                                                                  external-url-authorize="externalUrlAuthorize"
                                                                  custom-form-fields="customFormFields"
                                                                  class="ng-isolate-scope">
                                                <!-- ngRepeat: ticketCustomField in ticket.ticketCustomFields track by $index --></ticket-custome-field>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="panel-detail"
                             style="height: 685px; width: 1165px; padding:15px; margin-left:20px;background-color: white; position: relative; left:277px; top: -687px; overflow: auto">
                            <div class="form-group"><label class="ng-binding">主题
                                <!-- ngIf: systemFieldSubject.required --><span ng-if="systemFieldSubject.required"
                                                                                class="required ng-scope">*</span>
                                <!-- end ngIf: systemFieldSubject.required --></label>
                                <div subject="newTicket.subject" placeholder="systemFieldSubject.notes"
                                     class="ng-isolate-scope">
                                    <style>.input-autocomplete {
                                        border: 1px solid #ddd;
                                        height: auto;
                                        max-height: 300px;
                                        right: 0;
                                        left: 0;

                                        position: absolute;
                                        z-index: 10;
                                        background: #fff
                                    }

                                    .input-autocomplete ul {
                                        list-style: none;
                                        padding: 0
                                    }

                                    .input-autocomplete li {
                                        padding: 5px
                                    }

                                    .input-autocomplete li.selected {
                                        background: #eee
                                    }

                                    .input-autocomplete li.no-selected {
                                        background: #fff
                                    }</style>
                                    <div style="display:block;width:100%;position:relative"><input autocomplete="off"
                                                                                                   placeholder="工单主题"
                                                                                                   name="title"
                                                                                                   value=""
                                                                                                   type="text"
                                                                                                   ng-model="subject"
                                                                                                   required=""
                                                                                                   maxlength="128"
                                                                                                   class="form-control ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required ng-valid-maxlength"
                                                                                                   ng-change="search()">
                                        <div class="input-autocomplete ng-hide"
                                             ng-show="list.length&gt;0 &amp;&amp; isShowAutoComplete">
                                            <ul><!-- ngRepeat: item in list track by $index --></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-bottom:6px"><label class="ng-binding">描述
                                <!-- ngIf: systemFieldTicketdescription.required --></label>
                                <ticket-newcreate-box-template id="ticketContent">
                                    <div class="ticket_reply_box_template"
                                         ng-class="{&#39;private_true&#39;:!private_reply.isopenreply}">
                                        <!-- ngIf: !systemFieldTicketdescription.required&&systemFieldTicketdescription.edit_able==0 -->
                                        <div class="ticket_reply_box_bar"><label for="private" class="menu_list">
                                            <input id="private" value="" type="checkbox"
                                                   ng-checked="!private_reply.isopenreply" ng-click="setOpenNew()">
                                            私密回复</label>
                                            {#                                            <a href="javascript:void(0);" class="menu_list"><span#}
                                            {#                                                ng-click="showWechatEmoji($event);"><i class="iconfont"></i> 表情</span></a>#}
                                            {#                                            <wechat-emoji edit-element-id="textarea_area"#}
                                            {#                                                          wechat-emoji-panel-open="wechatEmojiPanelOpen"#}
                                            {#                                                          ng-show="wechatEmojiPanelOpen"#}
                                            {#                                                          class="ticket_emoji_area new_ticket ng-isolate-scope ng-hide"#}
                                            {#                                                          id="ticket_emoji_area">#}
                                            {#                                                <!-- ngIf: vm.wechatEmojiPanelOpen --></wechat-emoji>#}
                                            {#                                            <a has-module="remote_help" href="javascript:void(0);" class="menu_list"#}
                                            {#                                               ng-click="requestScreenshot();"><i class="iconfont"></i> <span>截屏</span>#}
                                            {#                                            </a>#}
                                            {#                                            <a has-module="remote_help" href="javascript:void(0);" class="menu_list"#}
                                            {#                                                   ng-click="requestVideo();"><i class="iconfont"></i> <span>录屏</span></a>#}
                                            <div id="container" class="menu_list" role="group">
                                                <input type="hidden" id="qiniuDomain" value="${(qiniuBucketDomain)!}"
                                                       autocomplete="off">
                                                <a data-toggle="dropdown"><i class="iconfont pull-left"
                                                                             style="font-size:14px;padding-right:4px"></i>
                                                    <span>上传附件</span></a>
                                                <ul class="dropdown-menu dropdown-menu-left" role="menu">
                                                    <li><a ng-click="uploadLocationBuried()"
                                                           id="pickfiles-new-create-box" ewei-uploader=""
                                                           files-added="filesAdded(up,files);"
                                                           upload-progress="uploadProgress(up,file);"
                                                           file-uploaded="fileUploaded(up,file,info);"
                                                           upload-error="uploadError(up, err, errTip);"
                                                           upload-complete="uploadComplete();" class="ng-isolate-scope"
                                                           style="position: relative; z-index: 1;">上传本地文件</a></li>
                                                    <li><a ng-click="pickResource();">调用社区资源</a></li>
                                                </ul>
                                                <div id="html5_1dhtesc8q37ipqqaho3rnmri_container"
                                                     class="moxie-shim moxie-shim-html5"
                                                     style="position: absolute; top: 0px; left: 0px; width: 0px; height: 0px; overflow: hidden; z-index: 0;">
                                                    <input id="html5_1dhtesc8q37ipqqaho3rnmri" type="file"
                                                           style="font-size: 999px; opacity: 0; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;"
                                                           multiple="" accept=""></div>
                                            </div>
                                        </div>
                                        <div class="ticket_reply_box_textarea"
                                             ng-class="{&#39;private_reply&#39;:!private_reply isopenreply}">
                                            <textarea name="content" value="" rows="5" cols="20" placeholder="工单描述"
                                                      style="width: 1133px; padding:12px; border: 0px; font-size: 14px"></textarea>
                                        </div>
                                    </div>
                                    <div class="pull-right"><!-- ngIf: cacheFiles.length > 0 --></div>
                                </ticket-newcreate-box-template>
                            </div>
                            <quick-knowledge-tip text-message="newTicket.ticketComment.content"
                                                 focus-area-id="ticketContent" hide-send-knowledge="true"
                                                 class="ng-isolate-scope">
                                <div ng-switch="" on="vm.quickmatchItems"><!-- ngSwitchDefault: -->
                                    <section ng-switch-default="" ng-show="vm.matchItems.length&gt;0"
                                             class="ng-scope ng-hide">
                                        <ul class="list-unstyled chat-replay-list">
                                            <!-- ngRepeat: item in vm.matchItems track by $index --></ul>
                                    </section><!-- end ngSwitchWhen: --><!-- ngSwitchWhen: knowledge --></div>
                            </quick-knowledge-tip>
                            <div style="margin-top:14px">
                                <div class="btn-group dropup ng-isolate-scope dropdown" uib-dropdown
                                     is-open="status.isopen" ticket="newTicket" save="save(_status)"
                                     custom-form-fields="customFormFields" disabled="disabled" uploading="uploading">
                                    <div id="on_btn_y"
                                         style="border-bottom-right-radius:0;border-top-right-radius:0;min-width:125px"
                                         type="button" class="btn btn-confirm gray-btn ladda-button"
                                         ng-click="submit()" ladda="disabled||uploading" data-style="zoom-in">
                                        <span class="ladda-label">
                                            <span>提 交</span></span>
                                        <span class="ladda-spinner"></span>
                                    </div>

                                    <div id="hidden_submit_y" style="height: 200px; width: 200px;">
                                        <table id="hidden_table_y" style="display: none">
                                            <tr>
                                                <td class="wy_table">
                                                    <input type="submit" name="sunbmit_finish" value="提交并处理完毕"
                                                           style="width:125px; height:40px; line-height:40px;background:transparent no-repeat;border:1px; background-color: ghostwhite; font-size: 13px; color:dimgrey">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="wy_table">
                                                    <input type="submit" name="sunbmit_stop" value="提交并暂停工单"
                                                           style="width:125px; height:40px; line-height:40px;background:transparent no-repeat;border:1px; background-color: ghostwhite; font-size: 13px; color:dimgrey">
                                                </td>
                                            </tr>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div><!-- uiView: phone -->
    <div ui-view="phone" class="ng-scope"></div>
    <div ng-controller="alertCtrl" class="ng-scope">
        <div style="position:absolute;top:50%;left:50%;width:400px;margin-top:-35px;margin-left:-200px;z-index:9999;color:#3e4954">
            <!-- ngRepeat: alert in alertsA --></div>
    </div>
    <div ng-show="false" ng-controller="installEweiHubServerController" class="ng-scope ng-hide"></div>
    <div ng-show="false" ng-controller="isFirstLoginController" class="ng-scope ng-hide"></div>
    <div ng-controller="providerInfoCompletionController" class="ng-scope"><!-- ngIf: showTrialTip --></div>
    <div class="am-fade main-view ng-scope ng-hide" ng-controller="appIframeController" ng-show="showDiv">
        <!-- ngRepeat: providerApp in providerApps track by $index -->
        <section ng-show="showPage[providerApp.app.id]" ng-repeat="providerApp in providerApps track by $index"
                 class="ng-scope ng-hide" style="">
            <iframe name="iframe_app" id="app_43"
                    style="width:100%;height:100%;position:absolute;top:0;left:0;border:none;z-index:0"
                    src="./add_order_files/saved_resource.html"></iframe>
        </section><!-- end ngRepeat: providerApp in providerApps track by $index --></div><!-- ngIf: !pageIsLoaded -->
    <!--<cti-play-screen></cti-play-screen>--><!--<record-ticket></record-ticket>-->
    <ewei-cometd class="ng-scope"></ewei-cometd>
    <ewei-notify class="ng-scope"></ewei-notify>
    <ewei-hub-socket></ewei-hub-socket><!--电话渠道指令-->
    <div ng-show="vm.showPhonePanel" class="ng-isolate-scope ng-hide"><!-- ngIf: vm.showMainDialPanel -->
        <div class="main-panel ng-scope" ng-if="vm.showMainDialPanel">
            <div class="ewei-dail-panel ng-isolate-scope" is-mutil="vm.isMutil" is-keep-phone="vm.isKeepPhone"
                 is-sip-call="vm.isSipCall" mutil-success="vm.mutilSuccess"><!-- ngIf: !vm.heldSuccess -->
                <div ng-show="vm.dialHeaderMenuShow" class=""><!-- ngIf: !vm.contactTitle -->
                    <div class="dail-header-menu ng-scope ng-isolate-scope" ng-if="!vm.contactTitle">
                        <!-- ngIf: vm.warntip -->
                        <div class="menu-button">
                            <div ng-class="{&#39;menu-actived&#39;:vm.dialSetPanel}" ng-click="vm.switchPanel(true)"
                                 class="menu-click menu-actived">拨号
                            </div>
                        </div>
                        <div class="menu-button">
                            <div ng-class="{&#39;menu-actived&#39;:!vm.dialSetPanel}" ng-click="vm.switchPanel(false)"
                                 class="menu-click">设置
                            </div>
                        </div>
                        <div class="menu-button"><!-- ngIf: vm.phoneStatus=='online' -->
                            <!-- ngIf: vm.phoneStatus=='dontDisturb' --><!-- ngIf: vm.phoneStatus=='transfer' -->
                            <!-- ngIf: vm.phoneStatus=='offline'&&vm.SipPhoneOK -->
                            <!-- ngIf: vm.phoneStatus=='offline'&&!vm.SipPhoneOK -->
                            <div ng-if="vm.phoneStatus==&#39;offline&#39;&amp;&amp;!vm.SipPhoneOK"
                                 class="menu-select ng-scope" style=""><span class="status offline"></span>离线
                            </div><!-- end ngIf: vm.phoneStatus=='offline'&&!vm.SipPhoneOK --></div>
                        <!-- ngIf: vm.statusList -->
                        <div style="clear:both"></div>
                    </div><!-- end ngIf: !vm.contactTitle --><!-- ngIf: vm.contactTitle --></div>
                <div ng-hide="vm.dialHeaderMenuShow" class="ng-hide">
                    <div class="dail-mutil-header clearfix ng-isolate-scope" is-keep-phone="vm.isKeepPhone"
                         is-sip-call="vm.isSipCall"><!-- ngIf: vm.isKeepPhone -->
                        <div class="info"
                             ng-style="vm.isKeepPhone?{&#39;height&#39;:&#39;22px&#39;,&#39;line-height&#39;:&#39;22px&#39;}:{}">
                            <span class="txt">拨号 - 邀请第三方</span> <a class="bk" href="javascript:void(0)"
                                                                   ng-click="vm.back()">返回</a></div>
                    </div>
                </div>
                <div ng-show="vm.whichPanelShow" class=""><!-- ngIf: vm.phoneEnable --><!-- ngIf: !vm.phoneEnable -->
                    <div ng-if="!vm.phoneEnable" class="phoneEnable ng-scope"><p
                            ng-class="{&#39;infiniteLoop&#39;:vm.isLoop,&#39;iconfont&#39;:true,&#39;icon-p&#39;:true}"
                            class="iconfont icon-p"></p>
                        <p class="tip-p ng-binding">话机不可用，请检查线路和设置</p></div><!-- end ngIf: !vm.phoneEnable --></div>
                <div ng-hide="vm.whichPanelShow" class="ng-hide">
                    <div class="ng-isolate-scope">
                        <div class="setting-head-common-phone ng-isolate-scope"><!-- ngIf: vm.warntip -->
                            <ul class="nav-list-phone clearfix">
                                <li ng-class="{&#39;active&#39;:vm.choseMenu[&#39;line&#39;],&#39;disabled&#39;:!vm.disabled[&#39;line&#39;]}"
                                    ng-click="vm.choseMenuFn(&#39;line&#39;);" class="active">线路
                                </li>
                                <li ng-class="{&#39;active&#39;:vm.choseMenu[&#39;phone&#39;],&#39;disabled&#39;:!vm.disabled[&#39;phone&#39;]}"
                                    ng-click="vm.choseMenuFn(&#39;phone&#39;);" class="disabled">话机
                                </li>
                                <li ng-class="{&#39;active&#39;:vm.choseMenu[&#39;voice&#39;],&#39;disabled&#39;:!vm.disabled[&#39;voice&#39;]}"
                                    ng-click="vm.choseMenuFn(&#39;voice&#39;);" class="disabled">语音
                                </li>
                                <li ng-class="{&#39;active&#39;:vm.choseMenu[&#39;network&#39;],&#39;disabled&#39;:!vm.disabled[&#39;network&#39;]}"
                                    ng-click="vm.choseMenuFn(&#39;network&#39;);" class="disabled">网络
                                </li>
                                <li ng-class="{&#39;active&#39;:vm.choseMenu[&#39;senior&#39;],&#39;disabled&#39;:!vm.disabled[&#39;senior&#39;]}"
                                    ng-click="vm.choseMenuFn(&#39;senior&#39;);" class="disabled">高级
                                </li>
                            </ul>
                        </div><!-- ngIf: vm.setPanel['line'] -->
                        <div ng-if="vm.setPanel[&#39;line&#39;]" class="ng-scope" style="">
                            <div class="setting-panel ng-isolate-scope"><h5>电话渠道</h5>
                                <div class="btn-group">
                                    <button class="btn btn-default btn-sm button-style ng-binding" type="button"
                                            ng-click="vm.refreshChannel();"><span class="xl iconfont"></span></button>
                                    <ul class="ul-style ng-hide" ng-show="vm.clicked">
                                        <!-- ngRepeat: item in vm.channel_list track by $index --></ul>
                                </div>
                                <p class="tip">选择一个渠道作为本话机的呼入/呼出线路，点击“连接”接入该线路。</p>
                                <!-- ngIf: vm.checkedChannel.voiceSystem == 'sip' -->
                                <!-- ngIf: vm.checkedChannel.voiceSystem == 'phone_box' -->
                                <button ladda="vm.connectingChannel"
                                        ng-click="vm.connectChannel(vm.checkedChannel.voiceSystem,vm.checkedChannel.id)"
                                        ng-disabled="vm.connectingChannel"
                                        class="btn connect-btn btn-confirm ladda-button"
                                        data-style="zoom-in"><span class="ladda-label">连接</span><span
                                        class="ladda-spinner"></span></button>
                                <!-- ngIf: vm.sipFail&&vm.checkedChannel.voiceSystem == 'sip' -->
                                <!-- ngIf: vm.warntip&&vm.checkedChannel.voiceSystem == 'phone_box' --></div>
                        </div><!-- end ngIf: vm.setPanel['line'] --><!-- ngIf: vm.setPanel['phone'] -->
                        <!-- ngIf: vm.setPanel['voice'] --><!-- ngIf: vm.setPanel['network'] -->
                        <!-- ngIf: vm.setPanel['senior'] --></div>
                </div>
            </div>
        </div><!-- end ngIf: vm.showMainDialPanel --><!-- ngIf: vm.showPhoneSipcallPanel -->
        <!-- ngIf: vm.showPhoneUsbCallPanel -->
        <div class="main-panel ng-hide" ng-show="vm.showTransferPanel" style="background-color:transparent">
            <ewei-phone-transfer class="ng-isolate-scope">
                <div class="transfer-panel" ng-hide="vm.hide"><!-- ngIf: vm.state == 'select-engineer' -->
                    <phone-transfer-call
                            ng-show="vm.state != &#39;select-engineer&#39; &amp;&amp; vm.state != &#39;nothing&#39;"
                            target="vm.transferTarget" host-tel-num="vm.hostTelNum" class="ng-isolate-scope ng-hide">
                        <div class="transfer-call">
                            <div class="held-tips ng-binding" ng-class="{&#39;host-offline&#39;:vm.hostOffline}"> 通话保持
                            </div>
                            <div class="header"><span class="txt">转接电话</span></div>
                            <p class="call-status ng-binding"
                               ng-style="{color:vm.state==&#39;transfer-failed&#39; ? &#39;red&#39; : &#39;&#39;}">
                                正在呼叫</p>
                            <div class="cti-user-info"><p class="phone-number ng-binding"></p>
                                <div class="img-box"><img class="img-circle"
                                                          ng-click="editable==&#39;true&#39;?toEdit():&#39;&#39;"
                                                          ng-src="source/images/face/header_40.png" title="" imageurl=""
                                                          defaultimageurl="source/images/face/header_40.png"
                                                          imagestyle="head.40.40" imageclass="img-circle"
                                                          editable="false"
                                                          src="{{ static('images/header_40.png') }}"></div>
                                <!-- ngIf: target.isEngineer --><!-- ngIf: target.isEngineer --></div>
                            <div class="operation">
                                <div class="keyboard">
                                    <div class="dial-fn-panel"><!-- ngIf: vm.showNumberPanel --></div>
                                    <!-- ngIf: vm.state == 'transfering' -->
                                    <div class="transfering-icons ng-scope" ng-if="vm.state == &#39;transfering&#39;">
                                        <!-- ngIf: vm.enableHangup --><!-- ngIf: vm.enableHangup --></div>
                                    <!-- end ngIf: vm.state == 'transfering' -->
                                    <!-- ngIf: vm.state == 'transfer-failed' -->
                                    <!-- ngIf: vm.hostOnline&&(vm.state == 'transfer-successful' || vm.state == 'transfer-finished') -->
                                </div>
                            </div>
                        </div>
                    </phone-transfer-call>
                </div>
            </ewei-phone-transfer>
        </div>
        <div ng-show="vm.showEweiPhoneMutil" class="ng-hide">
            <div class="mutil-panel ng-isolate-scope">
                <div class="tip message-tip-common ng-binding ng-hide"
                     ng-show="atc.message&amp;&amp;atc.message!=&#39;&#39;">
                    <div class="x" ng-click="atc.cancelMessage();">X</div>
                </div>
                <div class="mutil-title"><span class="txt">多方通话</span> <a href="https://13910044100.ewei.com/console/#"
                                                                          class="add-call ng-hide"
                                                                          ng-show="!vm.mutilIsEnd &amp;&amp; vm.canInvite"
                                                                          ng-click="vm.invite()">+添加通话方</a> <span
                        class="call-end ng-hide" ng-show="vm.mutilIsEnd">通话已结束</span></div>
                <div class="mutil-list clearfix"><!-- ngRepeat: item in vm.mutilList --></div>
                <div ng-show="!vm.mutilIsEnd" class="">
                    <sip-keyboard>
                        <div class="keyboard">
                            <div class="dial-fn-panel"><!-- ngIf: showNumberPanel --></div><!-- ngIf: canHangup -->
                            <!-- ngIf: canHangup --> <i class="iconfont ng-hide"
                                                        ng-show="calling &amp;&amp; callType==&#39;normal&#39;"
                                                        ng-click="goRecordTicket()" title="记录工单"></i></div>
                    </sip-keyboard>
                </div>
                <div class="failure-box ng-hide" ng-show="vm.mutilIsEnd">
                    <div class="save-ticket-panel">
                        <button class="btn back-class" ng-click="vm.closeSip();">关闭</button>
                        <button class="btn save-class" ng-click="vm.createTicket();">记录工单</button>
                    </div>
                </div>
            </div>
        </div><!-- ngIf: vm.showRecordTicketPanel --><!-- ngIf: vm.showPlayScreen --></div>
    <div class="ng-isolate-scope"><!-- ngIf: vm.viaCtiCount==0 && vm.autoHide -->
        <!-- ngIf: vm.viaSettingAuthorized==false && vm.autoHide --><!-- ngIf: vm.installApp -->
        <!-- ngIf: vm.installing -->
        <!-- ngIf: vm.missCallCount&&vm.missCallCount!=0 --></div><!--结束-->
    <div class="ng-isolate-scope">
        <div class="tipLayer ng-isolate-scope ng-hide" ng-show="showInstall" show-install="vm.showInstallApp">
            未检测到远程协助组件，请<a class="href" ng-click="vm.downloadApp()" style="margin-left:0px;">下载</a>安装<a class="href"
                                                                                             ng-click="vm.close()"
                                                                                             style="margin-left:20px;">关闭</a>
        </div>
        <div class="remote-box ng-hide" ng-show="vm.panelActived">
            <div ng-show="vm.showWithTab" class="">
                <div class="header">远程协助</div>
                <div class="content">
                    <div ng-show="vm.showCode" class="ng-isolate-scope">
                        <div class="code">
                            <div class="title">输入共享码，远程控制对方的电脑</div>
                            <div class="input-group"><input type="text"
                                                            class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                                                            ng-model="vm.code"> <span class="input-group-btn"><button
                                    class="btn button connct-btn custom-main-bgcolor ladda-button" ladda="vm.connecting"
                                    ng-click="vm.connect()" data-style="zoom-in"><span
                                    class="ladda-label">连接</span><span
                                    class="ladda-spinner"></span></button></span></div>
                        </div><!-- ngIf: vm.showInfo -->
                        <div class="tip-info ng-scope" ng-if="vm.showInfo"><span>共享码由客户在客户端生成并告知<br>如未安装客户端，<a
                                class="link"
                                href="https://13910044100.ewei.com/console/#"
                                ng-click="vm.downloadApp()">点此下载</a></span>
                        </div><!-- end ngIf: vm.showInfo --><!-- ngIf: vm.showCheck -->
                        <div class="type">
                            <div ng-click="vm.startRemoteType(&#39;desk&#39;)"><input type="checkbox" checked="checked"
                                                                                      ng-click="vm.startRemoteType(&#39;desk&#39;)"
                                                                                      ng-model="vm.startDesk"
                                                                                      ng-true-value="1"
                                                                                      ng-false-value="0"
                                                                                      ng-disabled="vm.connecting"
                                                                                      class="ng-pristine ng-untouched ng-valid ng-not-empty"><span>同步开启远程桌面</span>
                            </div>
                            <div ng-click="vm.startRemoteType(&#39;video&#39;)"><input type="checkbox"
                                                                                       ng-click="vm.startRemoteType(&#39;video&#39;)"
                                                                                       ng-model="vm.startVideo"
                                                                                       ng-true-value="1"
                                                                                       ng-false-value="0"
                                                                                       ng-disabled="vm.connecting"
                                                                                       class="ng-pristine ng-untouched ng-valid ng-empty"><span>同步开启视频通话</span>
                            </div>
                        </div>
                    </div>
                    <remote-control-contact ng-show="vm.showContact" class="ng-hide">showContact
                    </remote-control-contact>
                    <remote-control-recent-contact ng-show="vm.showRecentContact" class="ng-hide">recent-contact
                    </remote-control-recent-contact>
                    <remote-control-invite-before ng-show="vm.showInviteBefore" class="ng-hide">inviteBefore
                    </remote-control-invite-before>
                </div>
            </div>
            <remote-control-invite ng-show="vm.showInvite" class="ng-hide">invite</remote-control-invite>
        </div>
    </div>
    <div class="message-panel ng-isolate-scope" ng-class="{&#39;message-panel-active&#39;: vm.panelActived}">
        <section class="panel-messages" ng-show="vm.currentPanel!==&#39;setting&#39;">
            <header class="panel-header clearfix"><h5 class="panel-title pull-left">通知消息</h5>
                <div class="options pull-right"><a ng-click="vm.deleteNotifyLogs()"><i class="iconfont"></i></a><a
                        ng-click="vm.showSettingPanel()"
                        ui-sref="system_setting.detail({uri:&#39;my_account&#39;,settingType:&#39;system&#39;})"
                        href="https://13910044100.ewei.com/console/#/system_setting/system/my_account"><i
                        class="iconfont"></i></a></div>
            </header>
            <div class="panel-body">
                <ol class="messages-list"><!-- ngRepeat: log in vm.notifyLogs track by $index --></ol>
                <!-- ngIf: vm.notifyLogs.length === 0 -->
                <div class="tips ng-scope" ng-if="vm.notifyLogs.length === 0">没有新的通知消息</div>
                <!-- end ngIf: vm.notifyLogs.length === 0 -->
                <div ng-show="vm.loading" class="more-indicator ng-hide"><a ng-click="vm.getMore();">正在加载...</a></div>
            </div>
            <!-- ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !vm.licenseService.hasModule('oem') -->
            <footer ng-if="$root.providerLicense &amp;&amp; $root.providerLicense.type !=&#39;oem&#39; &amp;&amp; !vm.licenseService.hasModule(&#39;oem&#39;)"
                    class="panel-footer ng-scope"><a class="tips" ng-click="vm.hidePanel();vm.component_popup(1)">安装移动客户端，随时随地接收通知</a>
            </footer>
            <!-- end ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !vm.licenseService.hasModule('oem') -->
        </section>
    </div>
    <div class="avatar-panel ng-isolate-scope" ng-class="{&#39;avatar-panel-active&#39;: panelActived}">
        <ol class="nav-menu">
            <li ui-sref="system_setting.detail({uri:&#39;my_account&#39;,settingType:&#39;system&#39;})"
                ui-sref-opts="{reload: true}" ng-click="hidePanel();$parent.currentUserBuried();"
                href="#/system_setting/system/my_account"><a
                    class="important custom-main-font-color size16 ng-binding">王飞</a>
                <ul class="nav-submenu">
                    <li><span class="ellipsis ng-binding">默认服务台</span></li>
                    <li><span class="ellipsis ng-binding">创始人</span></li>
                </ul>
            </li>
            <li><a class="important custom-main-font-color" ng-href="https://13910044100.ewei.com/cti/"
                   ng-click="goCti($event)" target="_blank" href="https://13910044100.ewei.com/cti/">呼叫中心 <span
                    class="extra ng-binding">13910044100.ewei.com/cti/</span></a></li>
            <li><a class="important custom-main-font-color" ng-href="https://13910044100.ewei.com/"
                   ng-click="$parent.helpcenterBuried()" href="https://13910044100.ewei.com/">切换到帮助中心 <span
                    class="extra ng-binding">13910044100.ewei.com</span></a></li>
            <li><span class="gray">并发会话上限</span>
                <ul class="nav-submenu">
                    <li>
                        <button type="button" class="btn btn-default btn-dropdown ng-scope ng-binding"
                                bs-dropdown="chatNumberOptions" aria-haspopup="true" aria-expanded="false">6<i
                                class="iconfont"></i></button>
                    </li>
                </ul>
            </li>
            <li class="roomly">
                <ul class="nav-submenu">
                    <!-- ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !licenseService.hasModule('oem') -->
                    <li ng-if="$root.providerLicense &amp;&amp; $root.providerLicense.type !=&#39;oem&#39; &amp;&amp; !licenseService.hasModule(&#39;oem&#39;)"
                        class="ng-scope"><a ng-click="hidePanel();component_popup(1)">APP和微信客服端</a></li>
                    <!-- end ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !licenseService.hasModule('oem') -->
                    <!-- ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !licenseService.hasModule('oem') -->
                    <li ng-if="$root.providerLicense &amp;&amp; $root.providerLicense.type !=&#39;oem&#39; &amp;&amp; !licenseService.hasModule(&#39;oem&#39;)"
                        class="ng-scope"><a ng-click="hidePanel();component_popup(2)">远程协助组件</a></li>
                    <!-- end ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !licenseService.hasModule('oem') -->
                    <li><a ng-click="hidePanel();$parent.noviceguideBuried()" ui-sref="noviceguide.experience"
                           href="https://13910044100.ewei.com/console/#/noviceguide/experience">新手向导</a></li>
                    <li><a ng-click="hidePanel();$parent.helpTextBuried()" ng-href="https://help.ewei.com/"
                           target="_blank"
                           href="https://help.ewei.com/">帮助文档</a></li>
                    <!-- ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !licenseService.hasModule('oem') -->
                    <li ng-if="$root.providerLicense &amp;&amp; $root.providerLicense.type !=&#39;oem&#39; &amp;&amp; !licenseService.hasModule(&#39;oem&#39;)"
                        class="ng-scope"><a ng-click="hidePanel();developerBuried()" href="http://api.ewei.com/"
                                            target="_blank">开发者</a></li>
                    <!-- end ngIf: $root.providerLicense && $root.providerLicense.type !='oem' && !licenseService.hasModule('oem') -->
                    <li><a ng-click="hidePanel();developerBuried();goNotify();"
                           ui-sref="system_setting.detail({uri:&#39;my_account&#39;,settingType:&#39;system&#39;})"
                           ui-sref-opts="{reload: true}"
                           href="https://13910044100.ewei.com/console/#/system_setting/system/my_account">通知设置</a></li>
                </ul>
            </li>
            <li><a ng-click="logoutBuried()">退出</a></li>
        </ol>
    </div>
    <invite-engineer-dialog class="ng-isolate-scope"></invite-engineer-dialog><!--授权提示的指令-->
    <div><!-- ngIf: showCond -->
        <div style="background:#f7bf58;width:260px;position:absolute;right:43px;top:60px;z-index:9;border-radius:5px;padding:2px 5px"
             ng-show="capacityCond" class="ng-hide"><p style="margin:10px auto;width:100%;text-align:left;color:#FFF">
            你的容量即将超限，为防止容量超限导致服务暂停，请及时扩容</p>
            <div style="width:60px;text-align:center;color:#39F;margin-bottom:5px;float:right;cursor:pointer"
                 ng-click="toPay();">去扩容
            </div>
        </div>
        <div style="background:#f7bf58;width:260px;position:absolute;right:43px;top:60px;z-index:9;border-radius:5px;padding:2px 5px"
             ng-show="showThreeDaysTipCond" class="ng-hide"><p
                style="margin:10px auto;width:100%;text-align:left;color:#FFF">你的授权即将到期，为防止到期服务暂停，请及时联系客服续费</p>
            <div style="width:60px;text-align:center;color:#39F;float:right;cursor:pointer;margin-bottom:5px"
                 ng-click="linkEngineer();">联系客服
            </div>
        </div>
        <div style="background:#f7bf58;width:230px;position:absolute;right:43px;top:60px;z-index:9;border-radius:5px"
             ng-show="deductionCond" class="ng-hide"><p
                style="margin:10px auto;width:100%;text-align:center;color:#FFF">
            您的账户余额不足，请及时续费。</p>
            <div style="width:60px;text-align:center;color:#FFF;border:1px solid #FFF;border-radius:5px;margin:10px auto;cursor:pointer"
                 ng-click="linkEngineer();">联系客服
            </div>
        </div>
    </div><!-- 批量处理指示器 --><!-- ngIf: status !== 'ready' -->
    <script type="text/javascript" async="" src="{{ static('js/vds.js') }}"></script>

    <script src="{{ static('js/vendor-e38f538b51.js') }}" defer="defer"></script>
    <script src="{{ static('js/part1-a62d40a53c.js') }}" defer="defer"></script>
    <script src="{{ static('js/part2-a0f598a85b.js') }}" defer="defer"></script>
    <script src="{{ static('js/part3-7137ac87d7.js') }}" defer="defer"></script>
    <script src="{{ static('js/part4-670620dc42.js') }}" defer="defer"></script>
    <script src="{{ static('js/part5-7cd0ce974d.js') }}" defer="defer"></script><!-- partials:js -->
    <script src="{{ static('js/template-cache-html-8eda194ce5.js') }}" defer="defer"></script>
    <!-- endinject --><!-- <script type="text/javascript" src="source/lib/pdfmake/pdfmake.min.js" async="async"></script>
    <script type="text/javascript" src="source/lib/pdfmake/vfs_fonts.js" async="async"></script> -->
    <script type="text/javascript">(/msie/i.test(navigator.userAgent) || "ActiveXObject" in window) && -1 === location.search.indexOf("jumpBrowser=true") && (location.href = "/source/browser_not_support.html")</script>
    <!--growingio数据统计-->
    <script type="text/javascript">var _vds = _vds || [];
    window._vds = _vds, function () {
        _vds.push(["setAccountId", "8595fc4d9e866381"]), function () {
            var t = document.createElement("script");
            t.type = "text/javascript", t.async = !0, t.src = ("https:" == document.location.protocol ? "https://" : "http://") + "dn-growing.qbox.me/vds.js";
            var e = document.getElementsByTagName("script")[0];
            e.parentNode.insertBefore(t, e)
        }()
    }()</script>
    <script id="ewei-portal-script" src="{{ static('js/ed81414e01f7022a1d7892ad5e3b781f.js') }}"></script>
    <script src="{{ static('js/portal.js') }}"></script>
    <div id="ewei-websdk-portal"
         style="display: inline-block; position: fixed; padding: 20px 10px; background-color: rgb(249, 155, 4); border-radius: 23px; text-align: center; font-size: 16px; color: rgb(255, 255, 255); line-height: 22px; box-sizing: border-box; cursor: pointer; word-break: break-all; white-space: normal; z-index: 1000000; width: 46px; top: 50%; transform: translateY(-50%); right: 10px;">
        <img src="{{ static('images/chat.svg') }}"
             style="width: 30px; display: block; max-width: 30px; margin-left: auto; margin-right: auto; position: relative; left: -3px; margin-bottom: 5px;"><span
            style="position: absolute; top: 0px; right: 0px; width: 14px; height: 14px; background-color: rgb(255, 0, 0); border-radius: 7px; display: none;"></span><span>在线客服</span>
    </div>
    <div class="daterangepicker dropdown-menu ltr opensleft">
        <div class="calendar left">
            <div class="daterangepicker_input"><input class="input-mini form-control" type="text"
                                                      name="daterangepicker_start" value=""><i
                    class="fa fa-calendar glyphicon glyphicon-calendar"></i>
                <div class="calendar-time" style="display: none;">
                    <div></div>
                    <i class="fa fa-clock-o glyphicon glyphicon-time"></i></div>
            </div>
            <div class="calendar-table"></div>
        </div>
        <div class="calendar right">
            <div class="daterangepicker_input"><input class="input-mini form-control" type="text"
                                                      name="daterangepicker_end"
                                                      value=""><i
                    class="fa fa-calendar glyphicon glyphicon-calendar"></i>
                <div class="calendar-time" style="display: none;">
                    <div></div>
                    <i class="fa fa-clock-o glyphicon glyphicon-time"></i></div>
            </div>
            <div class="calendar-table"></div>
        </div>
        <div class="ranges">
            <ul>
                <li data-range-key="今天">今天</li>
                <li data-range-key="昨天">昨天</li>
                <li data-range-key="最近7天">最近7天</li>
                <li data-range-key="最近30天">最近30天</li>
                <li data-range-key="本月">本月</li>
                <li data-range-key="本季度">本季度</li>
                <li data-range-key="本年">本年</li>
                <li data-range-key="自定义">自定义</li>
            </ul>
            <div class="range_inputs">
                <button class="applyBtn btn btn-confirm" disabled="disabled" type="button">确定</button>
                <button class="cancelBtn btn btn-cancel" type="button">取消</button>
            </div>
        </div>
    </div>
    <div date-picker-wrap="" ng-model="date" ng-model-options="ngModelOptions" ng-change="dateSelection(date)"
         class="ng-pristine ng-untouched ng-valid ng-scope ng-empty" style="">
        <!-- ngIf: isOpen && showPicker == 'date' --></div>
    <div time-picker-wrap="" ng-model="date" ng-model-options="ngModelOptions" ng-change="dateSelection(date)"
         class="ng-pristine ng-untouched ng-valid ng-scope ng-empty"><!-- ngIf: isOpen && showPicker == 'time' --></div>

    <script>
        $(document).ready(function () {
            $("#on_btn_y").hover(function () {
                $("#hidden_table_y").css("display", "block")
            }, function () {
                $("#hidden_table_y").css("display", "none")
            })
            $(".wy_table").hover(function () {
                $("#hidden_table_y").css("display", "block")
            }, function () {
                $("#hidden_table_y").css("display", "none")
            })

            $("#service_list_info_y").focus(function (event) {
                $("#service_list_div_y").toggle(400);
            });
           $("#service_list_info_y").blur(function (event) {
                $("#service_list_div_y").toggle(400);
            });

            $("#service_list_div_y table tr").mousemove(function(){
                $(this).nextAll("tr").css("display", "block")

            })
             $("#service_list_div_y table tr td").click(function () {
                    {#console.log($(this).text())#}
                    $("#service_list_info_y").val($(this).text())
                })
        })
    </script>

{% endblock content %}

